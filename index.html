<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#7c3aed" />
    <meta
      name="description"
      content="Gerenciador inteligente de rotinas di√°rias"
    />

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" sizes="192x192" href="/icons/icon-192x192.png" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Lifestyle" />

    <title>Lifestyle - Gerenciador de Rotinas</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="stylesheet" href="css/screens.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header Component -->
      <header></header>

      <!-- Main App Container -->
      <main id="app">
        <!-- Componentes carregados dinamicamente via component-loader.js -->
      </main>

      <!-- Footer Component -->
      <footer></footer>
    </div>

    <!-- Modal de Configura√ß√µes ser√° injetado no body -->

    <!-- Component Loader (deve ser carregado antes de tudo) -->
    <script src="js/component-loader.js"></script>

    <!-- Core modules -->
    <script src="js/state.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/data-transfer.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/free-time.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/forms.js"></script>
    <script src="js/navigation.js"></script>

    <!-- Work and study modules -->
    <script src="js/work.js"></script>
    <script src="js/study.js"></script>
    <script src="js/cleaning.js"></script>
    <script src="js/planner.js"></script>

    <!-- Schedule modules -->
    <script src="js/schedule-generator.js?v=2025111001"></script>
    <script src="js/schedule-filters.js?v=2025111001"></script>
    <script src="js/schedule-render.js?v=2025111001"></script>
    <script src="js/schedule-display.js?v=2025111001"></script>

    <!-- Event tracking modules -->
    <script src="js/time-utils.js"></script>
    <script src="js/tracking-modals.js"></script>
    <script src="js/tracking-actions.js"></script>
    <script src="js/schedule-events.js"></script>

    <!-- Planner modules -->
    <script src="js/planner-wizard.js"></script>
    <script src="js/planner-data.js"></script>
    <script src="js/schedule-planner.js"></script>

    <!-- Main app -->
    <script src="js/main.js"></script>

    <!-- PWA e Notifica√ß√µes -->
    <script src="js/pwa-install.js"></script>
    <script src="js/notifications-simple.js"></script>

    <!-- PWA Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/service-worker.js")
            .then((registration) => {
              console.log("‚úÖ Service Worker registrado com sucesso");
              // Verifica atualiza√ß√µes a cada hora
              setInterval(() => {
                registration.update();
              }, 3600000);
            })
            .catch((error) =>
              console.error("‚ùå Erro ao registrar Service Worker:", error)
            );
        });
      }
    </script>

    <!-- Bot√£o de instala√ß√£o PWA (oculto por padr√£o) -->
    <button
      id="btn-install-pwa"
      style="
        display: none;
        position: fixed;
        bottom: 80px;
        right: 20px;
        z-index: 999;
        background: #7c3aed;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 600;
        box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        cursor: pointer;
        font-size: 14px;
        min-height: 44px;
        min-width: 44px;
      "
    >
      üì± Instalar App
    </button>
  </body>
</html>
